<Project>

  <Target Name="CleanProject"
          BeforeTargets="Clean"
          Condition="Exists($(DistDir))">

    <ItemGroup>
      <FilesToClean Include="$(DistDir)\**\*.*" />
      <FoldersToClean Include="$([System.IO.Directory]::GetDirectories(&quot;$(DistDir)&quot;))" />
    </ItemGroup>

    <Delete Files="@(FilesToClean)"/>
    <RemoveDir Directories="@(FoldersToClean)" />
  </Target>

  <Target Name="CopyNativeOutputFiles"
          AfterTargets="BuildMSVCProject"
          BeforeTargets="CoreCompile"
          Condition="'$(OutputPlatform)' != '' And '$(OutputFilePath)' != ''">
    <Copy SourceFiles="$(OutputFilePath)"
          DestinationFolder="$(SolutionDir)\dist\$(Configuration)\$(OutputPlatform)" />
  </Target>

</Project>