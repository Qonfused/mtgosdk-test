<Project>

  <Target Name="CleanProject"
          BeforeTargets="Clean"
          Condition="Exists($(DistDir))">

    <ItemGroup>
      <FilesToClean Include="$(DistDir)\**\*.*" />
      <FoldersToClean Include="$([System.IO.Directory]::GetDirectories(&quot;$(DistDir)&quot;))" />
    </ItemGroup>

    <Delete Files="@(FilesToClean)"/>
    <RemoveDir Directories="@(FoldersToClean)" />
  </Target>

  <Target Name="UpdateFeed"
          AfterTargets="Pack"
          Condition="'$(Configuration)' == 'Release'">
    <!-- Clean the local feed -->
    <Delete Files="@(FeedOutputPath)"/>
    <RemoveDir Directories="@(FeedOutputPath)" />
    <!-- Add the built packages to the local feed -->
    <Exec Command="$(NuGetExePath) init $(PackageOutputPath) $(FeedOutputPath)" />
  </Target>

</Project>